//
//  File.swift
//  
//
//  Created by Dmitry Bespalov on 03.01.22.
//

import Foundation
import Solidity
import XCTest

class AddressEncodingTests: XCTestCase {
    func testEncode() {
        let value = Sol.Address(storage: Sol.UInt160(0xef))
        let data = value.encode()
        let expected = Data([
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 16 bytes
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xef, // 32 bytes
        ])
        XCTAssertEqual(data, expected)
    }

    func testDecode() throws {
        let expected = Sol.Address(storage: Sol.UInt160(0xef))
        let data = Data([
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 16 bytes
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xef, // 32 bytes
        ])
        var offset = 0
        let value = try Sol.Address(from: data, offset: &offset)
        XCTAssertEqual(value, expected)
    }
}
